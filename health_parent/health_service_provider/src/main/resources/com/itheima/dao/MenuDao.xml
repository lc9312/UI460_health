<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itheima.dao.MemberDao">
    <!--获取当前登录用户的用户名以及对应的模块信息-->
    <select id="findAllModuleByUsername" resultType="com.itheima.pojo.Menu" parameterType="string">
    SELECT
    t_menu.*
    FROM
    t_user u,
    t_user_role  ur,
    t_role r,
    t_role_menu rm,
    t_menu m,
    WHERE
    u.id=ur.user_id AND
    ur.role_id= r.id AND
    r.id=rm.menu_id AND
    rm.role_id=m.id AND
    u.username=#{username}
    </select>
</mapper>